<ng-container *ngIf="(isAuthRoute$ | async) === false; else authOutlet">
  <div class="app-shell">
    <!-- Luxe Drawer Navigation -->
    <app-luxe-drawer
      [isOpen]="isDrawerOpen()"
      [navItems]="navItems"
      (closed)="closeDrawer()"
    >
      <div drawerFooter>
        <button
          mat-button
          class="logout-button"
          (click)="onLogout()"
          *ngIf="(isLoggedIn$ | async)"
        >
          <mat-icon>logout</mat-icon>
          Sign out
        </button>
      </div>
    </app-luxe-drawer>

    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <button
          mat-icon-button
          type="button"
          aria-label="Toggle navigation"
          (click)="toggleDrawer()"
          class="menu-button"
        >
          <mat-icon>menu</mat-icon>
        </button>
        <a routerLink="/studio" class="brand">OUTFITIFY</a>
      </div>

      <div class="header-right" *ngIf="(isLoggedIn$ | async)">
        <a
          class="credits-pill"
          routerLink="/credits"
          aria-label="View credits"
        >
          <mat-icon>toll</mat-icon>
          <span class="credits-value">{{ credits() ?? '...' }}</span>
        </a>

        <button
          mat-icon-button
          class="user-button"
          (click)="toggleDrawer()"
          aria-label="User menu"
        >
          <mat-icon>person_outline</mat-icon>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="app-content">
      <router-outlet />
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <app-bottom-nav
      *ngIf="(isLoggedIn$ | async)"
      [items]="bottomNavItems"
    ></app-bottom-nav>
  </div>
</ng-container>

<ng-template #authOutlet>
  <main class="auth-content">
    <router-outlet />
  </main>
</ng-template>
